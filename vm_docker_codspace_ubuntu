docker run -d -p 8080:3000 --shm-size=2g linuxserver/webtop:ubuntu-xfce

docker exec -u 0 -it $(docker ps -lq) bash -c "apt-get update && \
 apt-get install -y wget libpango-1.0-0 libx11-6 libxcb1 libxrandr2 libxinerama1 && \
 wget -qO anydesk.deb https://download.anydesk.com/linux/anydesk_6.3.2-1_amd64.deb && \
 apt-get install -y ./anydesk.deb"


# 1. Limpiar contenedores viejos y arrancar el nuevo con privilegios
docker rm -f anydesk_pc 2>/dev/null
docker run -d \
  --name=anydesk_pc \
  --privileged \
  -p 8080:3000 \
  --shm-size=2g \
  linuxserver/webtop:ubuntu-xfce

echo "â³ Esperando a que el sistema inicie (10 seg)..."
sleep 10

# 2. Instalar dependencias y AnyDesk automÃ¡ticamente dentro del contenedor
echo "ðŸš€ Instalando AnyDesk... (esto tarda un minuto)"
docker exec -u 0 anydesk_pc bash -c "apt-get update >/dev/null 2>&1 && \
 apt-get install -y wget libpango-1.0-0 >/dev/null 2>&1 && \
 wget -qO anydesk.deb https://download.anydesk.com/linux/anydesk_6.3.2-1_amd64.deb && \
 apt-get install -y ./anydesk.deb >/dev/null 2>&1"

echo "âœ… Â¡LISTO! Abre la Vista Previa en el puerto 8080."
echo "ðŸ‘‰ Dentro del escritorio visual, ve al MenÃº > Internet > AnyDesk."
